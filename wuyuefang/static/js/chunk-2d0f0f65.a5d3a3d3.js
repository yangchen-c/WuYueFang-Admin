(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0f65"],{"9f35":function(i,t,s){"use strict";s.r(t);var e=function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"app-container"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:i.listLoading,expression:"listLoading"}],attrs:{data:i.list,"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"角色名称",prop:"name",sortable:""}}),i._v(" "),s("el-table-column",{attrs:{align:"center",label:"说明",prop:"desc"}}),i._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width"},scopedSlots:i._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return i.handlePermission(t.row)}}},[i._v("授权")])]}}])})],1),i._v(" "),s("el-dialog",{attrs:{visible:i.permissionDialogFormVisible,title:"权限配置"},on:{"update:visible":function(t){i.permissionDialogFormVisible=t}}},[s("el-tree",{ref:"tree",attrs:{data:i.systemPermissions,"default-checked-keys":i.assignedPermissions,"show-checkbox":"","node-key":"id","highlight-current":""},scopedSlots:i._u([{key:"default",fn:function(t){t.node;var e=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[i._v(i._s(e.name))])])}}])}),i._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){i.permissionDialogFormVisible=!1}}},[i._v("取消")]),i._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:i.updatePermission}},[i._v("确定")])],1)],1)],1)},n=[],o=(s("9a33"),s("b775"));function a(i){return Object(o["a"])({url:"role/get_all",method:"get",params:i})}function r(i){return Object(o["a"])({url:"/role",method:"put",data:i})}function l(i){return Object(o["a"])({url:"jurisdiction/get_all",method:"get",params:i})}function d(i){return Object(o["a"])({url:"role/findById",method:"get",params:i})}var c={name:"Role",data:function(){return{list:null,listLoading:!0,listQuery:{page:1,limit:20},permissionDialogFormVisible:!1,systemPermissions:null,assignedPermissions:null,permissionForm:{id:void 0,permissions:[]}}},created:function(){this.getList(),this.getPermissionList()},methods:{getList:function(){var i=this;this.listLoading=!0,a().then((function(t){i.list=t.data.data,i.listLoading=!1})).catch((function(){i.list=[],i.listLoading=!1}))},handlePermission:function(i){this.permissionForm.id=i.id,this.getPermissionList(),this.getPermissionByRoleId(i.id),this.permissionDialogFormVisible=!0},getPermissionList:function(){var i=this;l().then((function(t){i.systemPermissions=t.data.data})).catch((function(){i.systemPermissions=[]}))},getPermissionByRoleId:function(i){var t=this;this.assignedPermissions=[];var s={id:i};d(s).then((function(i){i.data.data.role_jurisdiction_id?t.assignedPermissions=i.data.data.role_jurisdiction_id.split(","):t.assignedPermissions=[]})).catch((function(){t.assignedPermissions=[]}))},updatePermission:function(){var i=this;this.permissionForm.permissions=this.$refs.tree.getCheckedKeys(!0);var t={id:this.permissionForm.id,role_jurisdiction_id:this.permissionForm.permissions.join(",")};r(t).then((function(t){i.permissionDialogFormVisible=!1,i.$notify.success({title:"成功",message:"授权成功"})})).catch((function(t){i.$notify.error({title:"失败",message:t.data.message})}))}}},m=c,u=s("9ca4"),g=Object(u["a"])(m,e,n,!1,null,null,null);t["default"]=g.exports}}]);