(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-602e8b40"],{"1e61":function(e,t,r){},5233:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"goods",attrs:{rules:e.rules,model:e.goods,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"商品排序",prop:"seckill_sort"}},[r("el-input",{model:{value:e.goods.seckill_sort,callback:function(t){e.$set(e.goods,"seckill_sort",t)},expression:"goods.seckill_sort"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"班级类型",prop:"classification_id"}},[r("el-select",{attrs:{placeholder:"请选择班级类型"},on:{change:e.changeClassType},model:{value:e.goods.classification_id,callback:function(t){e.$set(e.goods,"classification_id",t)},expression:"goods.classification_id"}},e._l(e.classTypeList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"课程",prop:"curriculum_id"}},[r("el-select",{attrs:{placeholder:"请选择课程"},model:{value:e.goods.curriculum_id,callback:function(t){e.$set(e.goods,"curriculum_id",t)},expression:"goods.curriculum_id"}},e._l(e.courseList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"原价",prop:"seckill_oldprice"}},[r("el-input",{attrs:{placeholder:"请输入商品原价"},model:{value:e.goods.seckill_oldprice,callback:function(t){e.$set(e.goods,"seckill_oldprice",t)},expression:"goods.seckill_oldprice"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"秒杀价格",prop:"seckill_price"}},[r("el-input",{attrs:{placeholder:"请输入商品秒杀价格"},model:{value:e.goods.seckill_price,callback:function(t){e.$set(e.goods,"seckill_price",t)},expression:"goods.seckill_price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"秒杀时间",prop:"time"}},[r("el-date-picker",{attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.goods.time,callback:function(t){e.$set(e.goods,"time",t)},expression:"goods.time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"限购数量",prop:"seckill_limit_num"}},[r("el-input",{attrs:{placeholder:"请输入商品限购数量"},model:{value:e.goods.seckill_limit_num,callback:function(t){e.$set(e.goods,"seckill_limit_num",t)},expression:"goods.seckill_limit_num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.goods.remark,callback:function(t){e.$set(e.goods,"remark",t)},expression:"goods.remark"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"op-container"},[r("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handlePublish}},[e._v("上架")])],1)],1)},n=[],c=r("c1b1"),u=r("caa4"),s=r("cabd"),a=r("5f87"),o={name:"SecondKillGoodsCreate",data:function(){return{goods:{time:[]},rules:{seckill_sort:[{required:!0,message:"请输入商品排序",trigger:"blur"}],classification_id:[{required:!0,message:"请选择班级类型",trigger:"blur"}],curriculum_id:[{required:!0,message:"请选择课程",trigger:"blur"}],seckill_oldprice:[{required:!0,message:"请输入商品原价",trigger:"blur"}],seckill_price:[{required:!0,message:"请输入商品秒杀价格",trigger:"blur"}],time:[{required:!0,message:"请选择商品秒杀时间",trigger:"blur"}],seckill_limit_num:[{required:!0,message:"请输入商品数量",trigger:"blur"}]},classTypeList:[],courseList:[],areaList:[],schoolList:[]}},computed:{headers:function(){return{token:Object(a["a"])()}}},created:function(){this.$route.query.id?this.getDetailById(this.$route.query.id):this.goods={seckill_name:"",seckill_sort:"",curriculum_id:"",seckill_oldprice:"",seckill_price:"",time:[],seckill_limit_num:"",remark:"",classification_id:""},this.getClassTypeList()},methods:{changeClassType:function(e){this.getCourseList(e)},getCourseList:function(e){var t=this,r={classification_id:e};Object(s["f"])(r).then((function(e){t.courseList=e.data.data})).catch((function(){t.courseList=[]}))},getClassTypeList:function(){var e=this;Object(u["j"])().then((function(t){e.classTypeList=t.data.data})).catch((function(){e.classTypeList=[]}))},getDetailById:function(e){var t=this,r={id:e};Object(c["c"])(r).then((function(e){t.goods=e.data.data,t.goods.time=[e.data.data.seckill_starttime,e.data.data.seckill_endtime]})).catch((function(){console.log("err")}))},handleCancel:function(){this.$router.push({path:"/secondkill/secondkillList"})},handlePublish:function(){var e=this,t={seckill_sort:this.goods.seckill_sort,curriculum_id:this.goods.curriculum_id,seckill_price:this.goods.seckill_price,seckill_oldprice:this.goods.seckill_oldprice,start:this.goods.time[0],end:this.goods.time[1],seckill_limit_num:this.goods.seckill_limit_num,remark:this.goods.remark,campus_id:this.$store.state.user.campusId.length?this.$store.state.user.campusId[0]:"1"};this.$route.query.id?(t.id=this.$route.query.id,Object(c["e"])(t).then((function(t){e.$notify.success({title:"成功",message:"修改成功"}),e.$router.push({path:"/secondkill/secondkillList"})})).catch((function(t){e.$notify.error({title:"失败",message:t.data.message})}))):Object(c["a"])(t).then((function(t){e.$notify.success({title:"成功",message:"创建成功"}),e.$router.push({path:"/secondkill/secondkillList"})})).catch((function(t){e.$notify.error({title:"失败",message:t.data.message})}))}}},l=o,d=(r("a920"),r("9ca4")),m=Object(d["a"])(l,i,n,!1,null,null,null);t["default"]=m.exports},a920:function(e,t,r){"use strict";var i=r("1e61"),n=r.n(i);n.a},c1b1:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"f",(function(){return o}));var i=r("b775");function n(e){return Object(i["a"])({url:"seckill/findSeckillByPage",method:"get",params:e})}function c(e){return Object(i["a"])({url:"seckill/createSeckill",method:"post",data:e})}function u(e){return Object(i["a"])({url:"seckill",method:"put",data:e})}function s(e){return Object(i["a"])({url:"seckill",method:"delete",params:e})}function a(e){return Object(i["a"])({url:"seckill/getById",method:"get",params:e})}function o(e){return Object(i["a"])({url:"order/getOrderBySeckill",method:"get",params:e})}},caa4:function(e,t,r){"use strict";r.d(t,"r",(function(){return n})),r.d(t,"q",(function(){return c})),r.d(t,"t",(function(){return u})),r.d(t,"p",(function(){return s})),r.d(t,"u",(function(){return a})),r.d(t,"s",(function(){return o})),r.d(t,"o",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"h",(function(){return m})),r.d(t,"e",(function(){return f})),r.d(t,"n",(function(){return p})),r.d(t,"g",(function(){return g})),r.d(t,"j",(function(){return h})),r.d(t,"l",(function(){return b})),r.d(t,"i",(function(){return _})),r.d(t,"m",(function(){return k})),r.d(t,"k",(function(){return j})),r.d(t,"v",(function(){return O})),r.d(t,"c",(function(){return y})),r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return C})),r.d(t,"b",(function(){return $}));var i=r("b775");function n(e){return Object(i["a"])({url:"course_scheduling/findCampusTotalAndRemainTimes",method:"get",params:e})}function c(e){return Object(i["a"])({url:"campus/getAll",method:"get",params:e})}function u(e){return Object(i["a"])({url:"campus/getByPage",method:"get",params:e})}function s(e){return Object(i["a"])({url:"campus/createCampus",method:"post",data:e})}function a(e){return Object(i["a"])({url:"campus/updateCampus",method:"put",data:e})}function o(e){return Object(i["a"])({url:"campus/deleteCampus",method:"delete",params:e})}function l(e){return Object(i["a"])({url:"staff/getAll",method:"get",params:e})}function d(e){return Object(i["a"])({url:"class/byCampusId",method:"get",params:e})}function m(e){return Object(i["a"])({url:"class/byPage",method:"get",params:e})}function f(e){return Object(i["a"])({url:"class",method:"post",data:e})}function p(e){return Object(i["a"])({url:"class/updateClass",method:"put",data:e})}function g(e){return Object(i["a"])({url:"class/deleteClass",method:"delete",params:e})}function h(){return Object(i["a"])({url:"classification",method:"get"})}function b(e){return Object(i["a"])({url:"classification/byPage",method:"get",params:e})}function _(e){return Object(i["a"])({url:"classification",method:"post",data:e})}function k(e){return Object(i["a"])({url:"classification",method:"put",data:e})}function j(e){return Object(i["a"])({url:"classification/deleteClassification",method:"delete",params:e})}function O(){return Object(i["a"])({url:"staff/getAllTeacher",method:"get"})}function y(e){return Object(i["a"])({url:"course_scheduling/byPage",method:"get",params:e})}function v(e){return Object(i["a"])({url:"course_scheduling/createCourseScheduling",method:"post",data:e})}function C(e){return Object(i["a"])({url:"course_scheduling/updateCourseScheduling",method:"put",data:e})}function $(e){return Object(i["a"])({url:"course_scheduling",method:"delete",params:e})}},cabd:function(e,t,r){"use strict";r.d(t,"f",(function(){return n})),r.d(t,"h",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"i",(function(){return s})),r.d(t,"g",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"b",(function(){return m}));var i=r("b775");function n(e){return Object(i["a"])({url:"curriculum/get_all_curriculum",method:"get",params:e})}function c(e){return Object(i["a"])({url:"curriculum/getByPage",method:"get",params:e})}function u(e){return Object(i["a"])({url:"curriculum",method:"post",data:e})}function s(e){return Object(i["a"])({url:"curriculum",method:"put",data:e})}function a(e){return Object(i["a"])({url:"curriculum",method:"delete",params:e})}function o(e){return Object(i["a"])({url:"details/getByPage",method:"get",params:e})}function l(e){return Object(i["a"])({url:"details",method:"post",data:e})}function d(e){return Object(i["a"])({url:"details",method:"put",data:e})}function m(e){return Object(i["a"])({url:"details",method:"delete",params:e})}}}]);