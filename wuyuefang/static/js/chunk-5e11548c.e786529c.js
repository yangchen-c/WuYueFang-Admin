(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e11548c"],{"0d1c":function(e,t,r){"use strict";r.d(t,"q",(function(){return o})),r.d(t,"d",(function(){return n})),r.d(t,"f",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"g",(function(){return c})),r.d(t,"e",(function(){return s})),r.d(t,"i",(function(){return d})),r.d(t,"k",(function(){return l})),r.d(t,"b",(function(){return p})),r.d(t,"p",(function(){return m})),r.d(t,"h",(function(){return f})),r.d(t,"n",(function(){return g})),r.d(t,"l",(function(){return h})),r.d(t,"o",(function(){return b})),r.d(t,"m",(function(){return _})),r.d(t,"j",(function(){return j})),r.d(t,"a",(function(){return y}));var u=r("b775"),o="http://api.wuyuefang.top/upload";function n(e){return Object(u["a"])({url:"category",method:"get",params:e})}function a(e){return Object(u["a"])({url:"category/findAll",method:"get",params:e})}function i(e){return Object(u["a"])({url:"category",method:"post",data:e})}function c(e){return Object(u["a"])({url:"category",method:"put",data:e})}function s(e){return Object(u["a"])({url:"category",method:"delete",params:e})}function d(e){return Object(u["a"])({url:"trade/getById",method:"get",params:e})}function l(e){return Object(u["a"])({url:"trade/findLike",method:"get",params:e})}function p(e){return Object(u["a"])({url:"trade/add",method:"post",data:e})}function m(e){return Object(u["a"])({url:"trade",method:"put",data:e})}function f(e){return Object(u["a"])({url:"trade",method:"delete",params:e})}function g(e){return Object(u["a"])({url:"commodityStocks/getStockTwo",method:"get",params:e})}function h(e){return Object(u["a"])({url:"commodityStocks",method:"post",data:e})}function b(e){return Object(u["a"])({url:"commodityStocks",method:"put",data:e})}function _(e){return Object(u["a"])({url:"commodityStocks",method:"delete",params:e})}function j(e){return Object(u["a"])({url:"ptOrder/findByPage",method:"get",params:e})}function y(e){return Object(u["a"])({url:"ptOrder/getTrade/"+e.id,method:"put"})}},1:function(e,t){},10:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},"6ed4":function(e,t,r){"use strict";var u=r("827c"),o=r.n(u);o.a},7:function(e,t){},8:function(e,t){},"827c":function(e,t,r){},9:function(e,t){},b978:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"e",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return s}));var u=r("b775");function o(e){return Object(u["a"])({url:"usergroup/findUserGroupByPage",method:"get",params:e})}function n(e){return Object(u["a"])({url:"usergroup/createUserGroup",method:"post",data:e})}function a(e){return Object(u["a"])({url:"usergroup",method:"put",data:e})}function i(e){return Object(u["a"])({url:"usergroup/deleteUsergroup",method:"delete",params:e})}function c(e){return Object(u["a"])({url:"usergroup/findUsergroupById",method:"get",params:e})}function s(e){return Object(u["a"])({url:"order/getOrderByUserGroup",method:"get",params:e})}},b9e0:function(e,t,r){"use strict";(function(e){r("cc57"),r("9a33"),r("6d57");var u=r("b978"),o=r("caa4"),n=r("cabd"),a=r("0d1c"),i=r("5f87"),c=r("3c7d");t["a"]={name:"GroupbuyGoodsCreate",data:function(){return{uploadPath:a["q"],goods:{whetherCurriculum:!1,time:[],picUrl:"",infoPic:[]},rules:{whetherCurriculum:[{required:!0,message:"请选择商品类型",trigger:"blur"}],time:[{required:!0,message:"请选择拼团时间",trigger:"blur"}],user_group_num:[{required:!0,message:"请输入拼团人数",trigger:"blur"}],user_group_price:[{required:!0,message:"请输入拼团价格",trigger:"blur"}],user_group_oldprice:[{required:!0,message:"请输入单买价格",trigger:"blur"}],classification_id:[{required:!0,message:"请选择班级类型",trigger:"blur"}],curriculum_id:[{required:!0,message:"请选择拼团课程",trigger:"blur"}],user_group_sort:[{required:!0,message:"请输入商品排序",trigger:"blur"}],name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],picUrl:[{required:!0,message:"请输入商品封面图",trigger:"blur"}],infoPic:[{required:!0,message:"请输入商品图片",trigger:"blur"}]},classTypeList:[],courseList:[],areaList:[],schoolList:[]}},computed:{headers:function(){return{token:Object(i["a"])()}}},created:function(){this.$route.query.id?this.getDetailById(this.$route.query.id):this.goods={whetherCurriculum:!0,name:"",user_group_sort:"",curriculum_id:"",user_group_oldprice:"",user_group_price:"",user_group_num:"",time:[],picUrl:"",infoPic:[],remark:""},this.getClassTypeList()},methods:{changeGoodsType:function(e){this.goods.whetherCurriculum=e},changeClassType:function(e){this.getCourseList(e)},getCourseList:function(e){var t=this,r={classification_id:e};Object(n["f"])(r).then((function(e){t.courseList=e.data.data})).catch((function(){t.courseList=[]}))},getClassTypeList:function(){var e=this;Object(o["j"])().then((function(t){e.classTypeList=t.data.data})).catch((function(){e.classTypeList=[]}))},getDetailById:function(e){var t=this,r={id:e};Object(u["c"])(r).then((function(e){var r=e.data.data,u=[];r.user_group_img.split(",").forEach((function(e){var t={name:e,url:e};u.push(t)})),t.goods={whetherCurriculum:r.whetherCurriculum,name:r.name,user_group_sort:r.user_group_sort,curriculum_id:r.curriculum_id,user_group_oldprice:r.user_group_oldprice,user_group_price:r.user_group_price,user_group_num:r.user_group_num,time:[r.user_group_starttime,r.user_group_endtime],picUrl:r.user_group_cover,infoPic:u,remark:r.remark}})).catch((function(){t.goods={whetherCurriculum:!0,name:"",user_group_sort:"",curriculum_id:"",user_group_oldprice:"",user_group_price:"",user_group_num:"",time:[],picUrl:"",infoPic:[],remark:""}}))},handleCancel:function(){this.$router.push({path:"/groupbuy/groupbuyList"})},handlePublish:function(){var e=this,t=[];this.goods.infoPic.forEach((function(e){t.push(e.url)}));var r={whetherCurriculum:this.goods.whetherCurriculum,user_group_sort:this.goods.user_group_sort,curriculum_id:this.goods.whetherCurriculum?this.goods.curriculum_id:"",user_group_oldprice:this.goods.user_group_oldprice,user_group_price:this.goods.user_group_price,start:this.goods.time[0],end:this.goods.time[1],user_group_num:this.goods.user_group_num,remark:this.goods.remark,campus_id:this.$store.state.user.campusId.length?this.$store.state.user.campusId[0]:1,name:this.goods.name,user_group_cover:this.goods.whetherCurriculum?"":this.goods.picUrl,user_group_img:this.goods.whetherCurriculum?"":t.join(",")};this.$route.query.id?(r.id=this.$route.query.id,Object(u["e"])(r).then((function(t){e.$notify.success({title:"成功",message:"修改成功"}),e.$router.push({path:"/groupbuy/groupbuyList"})})).catch((function(t){e.$notify.error({title:"失败",message:t.data.message?t.data.message:"修改失败"})}))):Object(u["a"])(r).then((function(t){e.$notify.success({title:"成功",message:"创建成功"}),e.$router.push({path:"/groupbuy/groupbuyList"})})).catch((function(t){e.$notify.error({title:"失败",message:t.data.message?t.data.message:"创建失败"})}))},beforePicUrlUpload:function(t){var r=this,u=this,o={endpoint:"http://bj.bcebos.com",credentials:{ak:"d4f7997db9c74baf96a42483bdfcd558",sk:"33e1fa5a8e6b4c11a0638cad34e85980"}},n="wuyuefang",a=new FileReader;return a.readAsArrayBuffer(t),a.onload=function(a){var i=new e(a.target.result),s=new c["BosClient"](o);s.putObject(n,t.name,i).then((function(e){u.goods.picUrl=o.endpoint+"/"+n+"/"+t.name})).catch((function(){r.$notify.error({title:"失败",message:"封面图上传失败"})}))},!1},beforeDetailPicUrlUpload:function(t){var r=this,u=this,o={endpoint:"http://bj.bcebos.com",credentials:{ak:"d4f7997db9c74baf96a42483bdfcd558",sk:"33e1fa5a8e6b4c11a0638cad34e85980"}},n="wuyuefang",a=new FileReader;return a.readAsArrayBuffer(t),a.onload=function(a){var i=new e(a.target.result),s=new c["BosClient"](o);s.putObject(n,t.name,i).then((function(e){u.goods.infoPic.push({name:o.endpoint+"/"+n+"/"+t.name,url:o.endpoint+"/"+n+"/"+t.name})})).catch((function(){r.$notify.error({title:"失败",message:"商品图上传失败"})}))},!1},handleRemove:function(e,t){for(var r=0;r<this.goods.infoPic.length;r++){var u;u=void 0===e.response?e.url:e.response.data.url,this.goods.infoPic[r].url===u&&this.goods.infoPic.splice(r,1)}}}}}).call(this,r("fd40").Buffer)},c93a:function(e,t,r){"use strict";r.r(t);var u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"goods",attrs:{rules:e.rules,model:e.goods,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"商品类型",prop:"whetherCurriculum"}},[r("el-radio-group",{on:{change:e.changeGoodsType},model:{value:e.goods.whetherCurriculum,callback:function(t){e.$set(e.goods,"whetherCurriculum",t)},expression:"goods.whetherCurriculum"}},[r("el-radio",{attrs:{label:!0,value:!0}},[e._v("课程")]),e._v(" "),r("el-radio",{attrs:{label:!1,value:!1}},[e._v("自传")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"商品排序",prop:"user_group_sort"}},[r("el-input",{attrs:{placeholder:"请输入商品排序"},model:{value:e.goods.user_group_sort,callback:function(t){e.$set(e.goods,"user_group_sort",t)},expression:"goods.user_group_sort"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[r("el-input",{model:{value:e.goods.name,callback:function(t){e.$set(e.goods,"name",t)},expression:"goods.name"}})],1),e._v(" "),e.goods.whetherCurriculum?r("el-form-item",{attrs:{label:"班级类型",prop:"classification_id"}},[r("el-select",{attrs:{placeholder:"请选择班级类型"},on:{change:e.changeClassType},model:{value:e.goods.classification_id,callback:function(t){e.$set(e.goods,"classification_id",t)},expression:"goods.classification_id"}},e._l(e.classTypeList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),e._v(" "),e.goods.whetherCurriculum?r("el-form-item",{attrs:{label:"课程",prop:"curriculum_id"}},[r("el-select",{attrs:{placeholder:"请选择课程"},model:{value:e.goods.curriculum_id,callback:function(t){e.$set(e.goods,"curriculum_id",t)},expression:"goods.curriculum_id"}},e._l(e.courseList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),e._v(" "),e.goods.whetherCurriculum?e._e():r("el-form-item",{attrs:{label:"商品封面图",prop:"picUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadPath,"show-file-list":!1,headers:e.headers,"before-upload":e.beforePicUrlUpload,accept:".jpg,.jpeg,.png,.gif"}},[e.goods.picUrl?r("img",{staticClass:"avatar",attrs:{src:e.goods.picUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),e.goods.whetherCurriculum?e._e():r("el-form-item",{attrs:{label:"商品图片",prop:"infoPic"}},[r("el-upload",{ref:"upload",attrs:{action:e.uploadPath,headers:e.headers,"before-upload":e.beforeDetailPicUrlUpload,"on-remove":e.handleRemove,multiple:"",accept:".jpg,.jpeg,.png,.gif","list-type":"picture-card","file-list":e.goods.infoPic}},[r("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"单买价格",prop:"user_group_oldprice"}},[r("el-input",{attrs:{placeholder:"请输入单买价格"},model:{value:e.goods.user_group_oldprice,callback:function(t){e.$set(e.goods,"user_group_oldprice",t)},expression:"goods.user_group_oldprice"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"拼团价格",prop:"user_group_price"}},[r("el-input",{attrs:{placeholder:"请输入拼团价格"},model:{value:e.goods.user_group_price,callback:function(t){e.$set(e.goods,"user_group_price",t)},expression:"goods.user_group_price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"拼团人数",prop:"user_group_num"}},[r("el-input",{attrs:{placeholder:"请输入拼团人数"},model:{value:e.goods.user_group_num,callback:function(t){e.$set(e.goods,"user_group_num",t)},expression:"goods.user_group_num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"拼团时间",prop:"time"}},[r("el-date-picker",{attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.goods.time,callback:function(t){e.$set(e.goods,"time",t)},expression:"goods.time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.goods.remark,callback:function(t){e.$set(e.goods,"remark",t)},expression:"goods.remark"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"op-container"},[r("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handlePublish}},[e._v("上架")])],1)],1)},o=[],n=r("b9e0"),a=n["a"],i=(r("6ed4"),r("9ca4")),c=Object(i["a"])(a,u,o,!1,null,null,null);t["default"]=c.exports},caa4:function(e,t,r){"use strict";r.d(t,"r",(function(){return o})),r.d(t,"q",(function(){return n})),r.d(t,"t",(function(){return a})),r.d(t,"p",(function(){return i})),r.d(t,"u",(function(){return c})),r.d(t,"s",(function(){return s})),r.d(t,"o",(function(){return d})),r.d(t,"f",(function(){return l})),r.d(t,"h",(function(){return p})),r.d(t,"e",(function(){return m})),r.d(t,"n",(function(){return f})),r.d(t,"g",(function(){return g})),r.d(t,"j",(function(){return h})),r.d(t,"l",(function(){return b})),r.d(t,"i",(function(){return _})),r.d(t,"m",(function(){return j})),r.d(t,"k",(function(){return y})),r.d(t,"v",(function(){return v})),r.d(t,"c",(function(){return O})),r.d(t,"a",(function(){return C})),r.d(t,"d",(function(){return k})),r.d(t,"b",(function(){return w}));var u=r("b775");function o(e){return Object(u["a"])({url:"course_scheduling/findCampusTotalAndRemainTimes",method:"get",params:e})}function n(e){return Object(u["a"])({url:"campus/getAll",method:"get",params:e})}function a(e){return Object(u["a"])({url:"campus/getByPage",method:"get",params:e})}function i(e){return Object(u["a"])({url:"campus/createCampus",method:"post",data:e})}function c(e){return Object(u["a"])({url:"campus/updateCampus",method:"put",data:e})}function s(e){return Object(u["a"])({url:"campus/deleteCampus",method:"delete",params:e})}function d(e){return Object(u["a"])({url:"staff/getAll",method:"get",params:e})}function l(e){return Object(u["a"])({url:"class/byCampusId",method:"get",params:e})}function p(e){return Object(u["a"])({url:"class/byPage",method:"get",params:e})}function m(e){return Object(u["a"])({url:"class",method:"post",data:e})}function f(e){return Object(u["a"])({url:"class/updateClass",method:"put",data:e})}function g(e){return Object(u["a"])({url:"class/deleteClass",method:"delete",params:e})}function h(){return Object(u["a"])({url:"classification",method:"get"})}function b(e){return Object(u["a"])({url:"classification/byPage",method:"get",params:e})}function _(e){return Object(u["a"])({url:"classification",method:"post",data:e})}function j(e){return Object(u["a"])({url:"classification",method:"put",data:e})}function y(e){return Object(u["a"])({url:"classification/deleteClassification",method:"delete",params:e})}function v(){return Object(u["a"])({url:"staff/getAllTeacher",method:"get"})}function O(e){return Object(u["a"])({url:"course_scheduling/byPage",method:"get",params:e})}function C(e){return Object(u["a"])({url:"course_scheduling/createCourseScheduling",method:"post",data:e})}function k(e){return Object(u["a"])({url:"course_scheduling/updateCourseScheduling",method:"put",data:e})}function w(e){return Object(u["a"])({url:"course_scheduling",method:"delete",params:e})}},cabd:function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"h",(function(){return n})),r.d(t,"e",(function(){return a})),r.d(t,"i",(function(){return i})),r.d(t,"g",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return d})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return p}));var u=r("b775");function o(e){return Object(u["a"])({url:"curriculum/get_all_curriculum",method:"get",params:e})}function n(e){return Object(u["a"])({url:"curriculum/getByPage",method:"get",params:e})}function a(e){return Object(u["a"])({url:"curriculum",method:"post",data:e})}function i(e){return Object(u["a"])({url:"curriculum",method:"put",data:e})}function c(e){return Object(u["a"])({url:"curriculum",method:"delete",params:e})}function s(e){return Object(u["a"])({url:"details/getByPage",method:"get",params:e})}function d(e){return Object(u["a"])({url:"details",method:"post",data:e})}function l(e){return Object(u["a"])({url:"details",method:"put",data:e})}function p(e){return Object(u["a"])({url:"details",method:"delete",params:e})}}}]);